var k=Object.defineProperty;var x=(l,e,i)=>e in l?k(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i;var t=(l,e,i)=>x(l,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();const g=window.innerWidth;class S{constructor(){t(this,"size");this.size=this.getSize()}getSize(){const e=window.innerHeight;return g<e?e/6:g/6}}const r=new S;class L{constructor(e){t(this,"id");t(this,"x");t(this,"y");t(this,"type");t(this,"direction");this.id=`id-${crypto.randomUUID()}`,this.x=Math.random()*100,this.type=e,this.direction=Math.random()>.5?"right":"left",this.y=this.type.addDepth()}update(){this.direction==="right"&&this.x<100?this.x+=this.type.speed:this.direction==="left"&&this.x>0?this.x-=this.type.speed:this.x<=10?this.direction="right":this.x>=90&&(this.direction="left")}}class a{constructor(e,i,n,s,o,h){t(this,"width");t(this,"height");t(this,"img");t(this,"value");t(this,"speed",.08);t(this,"depths");this.width=e,this.height=i,this.img=n,this.value=s,this.speed=o,this.depths=h}addDepth(){const e=this.depths[0],i=this.depths[1];return Math.floor(Math.random()*(i-e+1))+e}}const v=[],b=new a(r.size/3,r.size/3,"./src/assets/fish5.png",20,.08,[15,75]),$=new a(r.size/3,r.size/3,"./src/assets/fish6.png",25,.16,[55,75]),M=new a(r.size/1.5,r.size/1.5,"./src/assets/fish8.png",100,.08,[75,95]),E=new a(r.size/3,r.size/3,"./src/assets/shoe.png",0,0,[95,96]);v.push(b,$,M,E);const z=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,3,3],[0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3]];class T{constructor(e,i,n=[0,1,2]){t(this,"number");t(this,"goalScore");t(this,"fishes");this.number=e,this.goalScore=i,this.fishes=this.createFishList(...n)}createFishList(...e){let i=[];return e.forEach(n=>{i.push(new L(v[n]))}),i}}function f(l,e){let i=[],n=e;for(let s=0;s<l;s++)i.push(new T(s+1,n,z[s])),n+=100;return i}let d=f(3,100);function C(){d=f(3,100)}class G{constructor(e,i){t(this,"model");t(this,"view");t(this,"intervalId");this.model=e,this.view=i,this.intervalId=void 0}init(){document.addEventListener("keydown",e=>this.handleKeyPress(e)),document.addEventListener("click",e=>this.handleMouseClick(e)),this.intervalId=setInterval(()=>this.gameLoop(),1e3/60)}stop(){this.intervalId&&(this.model.player.hook.stopSound(this.model.player.hook.backwardSound),this.model.player.hook.stopSound(this.model.player.hook.forwardSound),clearInterval(this.intervalId),console.log("Game Stopped"))}handleKeyPress(e){e.key===" "&&!this.model.levelCompleted&&(this.model.player.hook.isMoving||this.model.player.hook.launch())}handleMouseClick(e){this.model.levelCompleted||!this.model.player.hook.isMoving&&e.target.type!=="button"&&this.model.player.hook.launch()}gameLoop(){this.model.update(),this.view.renderHook(this.model.player.hook),this.view.renderWater(this.model.level.number),this.view.updateScore(this.model.score),this.view.updateTimer(this.model.timer),this.model.timer<1&&(this.stop(),clearInterval(this.intervalId),this.model.checkLevelCompletion())}restartLevel(){this.stop(),this.model.modalWindow.close(),this.model.levelCompleted=!1,this.model.timer=60,this.model.score=0,this.model.player.hook.retract();const e=d.indexOf(this.model.level);this.model.level=d[e+1],this.model.level!==void 0&&(this.view.updateLevel(this.model.level.number),this.view.updateGoal(this.model.level.goalScore)),this.init()}restartGame(){this.stop(),this.restartLevel(),C(),this.model.level=d[0],this.view.updateLevel(this.model.level.number),this.view.updateGoal(this.model.level.goalScore)}}class q{constructor(){t(this,"element");t(this,"type",O);this.element=document.querySelector("#modal"),this.renderModal()}renderModal(){const e=`
            <div class="modal-content">
                <div class="modal-body">
                <h2>${this.type.title}</h2>
                <p>${this.type.text}</p>
                <button type="button">${this.type.textButton}</button>
                </div>
            </div>
        `;this.element.innerHTML=e,this.open()}open(){this.element.style.display="block"}close(){this.element.style.display="none"}checkType(e){this.type=e,this.renderModal()}}class c{constructor(e,i,n,s){t(this,"title");t(this,"text");t(this,"typeButton");t(this,"textButton");this.title=e,this.text=i,this.typeButton=n,this.textButton=s}}const O=new c("Welcome to the Fishing Game","Use the space key to control the hook and catch as many fish as you can. Each level has a target score you must reach within one minute to advance. Good luck!","button","Start Game"),W=new c("Level Completed","Your score is high enough to move to the next level","button","Next Level"),H=new c("Congratulations","You have completed all levels","button","Game Again"),I=new c("Game Over","You didn't score enough points, so the game is over.","button","Restart Game");class B{constructor(e,i,n){t(this,"id");t(this,"name");t(this,"x");t(this,"y");t(this,"hook");this.x=i,this.y=n,this.name=e,this.id=`id-${crypto.randomUUID()}`,this.hook=new F(this.x,this.y)}}class F{constructor(e,i){t(this,"x");t(this,"y");t(this,"angle",0);t(this,"length",5);t(this,"speed",2);t(this,"rotationSpeed",.003);t(this,"isMoving",!1);t(this,"direction","forward");t(this,"rotate","left");t(this,"score",0);t(this,"soundCatch",new Audio("./src/assets/sounds/catch.mp3"));t(this,"forwardSound",new Audio("./src/assets/sounds/forward.mp3"));t(this,"backwardSound",new Audio("./src/assets/sounds/backward.mp3"));t(this,"swingingSound",new Audio("./src/assets/sounds/swinging.mp3"));this.x=e,this.y=i}update(){try{this.isMoving?(this.direction==="forward"?(this.stopSound(this.swingingSound),this.forwardSound.play(),this.length+=this.speed):this.direction==="backward"&&(this.stopSound(this.forwardSound),this.length-=this.speed,this.backwardSound.play()),this.isOutOfBounds()&&(this.direction="backward"),this.length<=5&&this.stopSound(this.backwardSound)):this.rotate==="left"&&this.angle<.82?this.angle+=this.rotationSpeed:this.rotate==="right"&&this.angle>-.82?this.angle-=this.rotationSpeed:this.angle>.8?this.rotate="right":this.angle<-.8&&(this.rotate="left")}catch(e){console.error(e)}}isOutOfBounds(){try{const e=window.innerWidth,i=window.innerHeight,s=document.querySelector("#hook").getBoundingClientRect(),o=s.left,h=s.top;return o<0||o>e-s.width||h<0||h>i-s.height}catch(e){console.error(e)}}launch(){this.isMoving=!0}retract(){this.isMoving=!1,this.length=5,this.direction="forward"}stopSound(e){e.pause(),e.currentTime=0}caughtObject(e){try{const n=document.querySelector(`#${e.id}`).getBoundingClientRect(),o=document.querySelector("#grab").getBoundingClientRect(),h=n.left,p=n.top,m=o.left,y=o.top;return m>h&&m<h+e.type.width&&y>p&&y<p+e.type.height}catch(i){console.error(i)}}}class R{constructor(){t(this,"player");t(this,"score",0);t(this,"timer",60);t(this,"minScore",100);t(this,"levelCompleted",!1);t(this,"modalWindow",new q);t(this,"level",d[0]);this.player=new B("user",-(r.size/6.1),r.size/2.6)}update(){const e=document.querySelector("#grab");this.timer>1?this.timer-=1/60:this.checkLevelCompletion(),this.player.hook.update(),this.player.hook.isMoving&&this.level.fishes.forEach((i,n)=>{if(this.player.hook.caughtObject(i)){const s=document.querySelector(`#${i.id}`);e.appendChild(s),this.player.hook.direction="backward",this.score+=i.type.value,this.level.fishes.splice(n,1)}}),this.player.hook.length<=5&&(this.player.hook.retract(),e.childNodes.length>0&&(e.innerHTML="",this.player.hook.soundCatch.play()))}checkLevelCompletion(){this.score>=this.level.goalScore?(this.levelCompleted=!0,this.level.number===d.length?(this.modalWindow.checkType(H),console.log("Congratulations! You have completed the game!")):(this.modalWindow.checkType(W),console.log("Congratulations! You have completed the level!"))):(this.modalWindow.checkType(I),console.log("The time is up! The level has not been completed."))}}class Y{constructor(){t(this,"playerElement");t(this,"hookElement");t(this,"objectsContainer");t(this,"scoreElement");t(this,"timerElement");t(this,"modalElement");t(this,"levelElement");t(this,"goalElement");this.playerElement=document.querySelector("#player"),this.hookElement=document.querySelector("#hook"),this.objectsContainer=document.querySelector(".water"),this.scoreElement=document.querySelector("#score"),this.timerElement=document.querySelector("#timer"),this.modalElement=document.querySelector("#modal"),this.levelElement=document.querySelector("#level"),this.goalElement=document.querySelector("#goal")}renderHook(e){const i=document.querySelector("#fishing-rod");i.style.display="block";const n=document.querySelector("#hook"),s=document.querySelector("#fishing-line");e.isMoving?(s.style.height=`${e.length+r.size/6}px`,e.angle<0?(n.style.left=`${e.length*Math.sin(0)}px`,n.style.top=`${e.length*Math.cos(0)}px`):(n.style.left=`-${e.length*Math.sin(0)}px`,n.style.top=`${e.length*Math.cos(0)}px`)):(e.update(),s.style.height=`${r.size/6}px`,i.style.transform=`rotate(${e.angle}rad)`,i.style.left=`${e.x}px`,n.style.left="0px",i.style.top=`${e.y}px`,n.style.top="0px")}renderWater(e){let i="";d[e-1].fishes.forEach(o=>{o.direction==="left"?i+=`<div id="${o.id}" class="fish" style="left: ${o.x}%; top: ${o.y}%; width: ${o.type.width}px; height: ${o.type.height}px;"><img src="${o.type.img}" alt="fish" style="transform: scaleX(-1);"></div>`:i+=`<div id="${o.id}" class="fish" style="left: ${o.x}%; top: ${o.y}%; width: ${o.type.width}px; height: ${o.type.height}px;"><img src="${o.type.img}" alt="fish"></div>`,o.update()}),this.objectsContainer.innerHTML=i}updateScore(e){this.scoreElement.innerText=`Score: ${e}`}updateTimer(e){this.timerElement.innerText=`Time: ${Math.floor(e)}`}updateLevel(e){this.levelElement.innerText=`Level: ${e}`}updateGoal(e){this.goalElement.innerText=`Goal: ${e}`}}function A(){const l=`
  <div id="modal"></div>
  <div class="header" style="height: ${r.size*.58}px; font-size: ${r.size/10}px;">
    <div class="div-box">
        <div id="score">Score: 0</div>
        <div id="goal">Goal: 100</div>
    </div>

    <div id="player" style="width: ${r.size/1.3}px; height: ${r.size/1.3}px;">
      <div id="fishing-rod" style="width: ${r.size/3}px; height: ${r.size/3}px;">
        <div id="fishing-line"></div>
        <div id="hook">
          <div id="grab" style="height: ${r.size/6}px; width: ${r.size/6}px"></div>
        </div>
      </div>
    </div>

    <div class="div-box">
        <div id="level">Level: 1</div>
        <div id="timer">Timer: 60</div>
    </div>
  </div>
  <div class="water"></div>
  <div id="links">This project incorporates design elements inspired by the works of
  <a href="https://www.flaticon.com/authors/juicy-fish" target="_blank">juicy_fish</a>,
  <a href="https://www.flaticon.com/authors/eucalyp" target="_blank">eucalyp</a>, and
  <a href="https://www.flaticon.com/authors/freepik" target="_blank">Freepik</a>, sourced from
  <a href="https://www.flaticon.com" target="_blank">Flaticon</a>.</div>
  `,e=document.querySelector("#game");e.innerHTML=l}A();const w=new R,P=new Y,u=new G(w,P);document.addEventListener("DOMContentLoaded",()=>{document.querySelector("button").addEventListener("click",()=>{w.modalWindow.close(),u.init()})});document.addEventListener("click",l=>{l.target.type==="button"&&(l.target.innerHTML==="Next Level"?u.restartLevel():(l.target.innerHTML==="Game Again"||l.target.innerHTML==="Restart Game")&&u.restartGame())});
